files:
  "/etc/nginx/conf.d/proxy.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Serve static files from the public directory
      location / {
          root /var/www/html/public;
          index index.html;
          try_files $uri $uri/ /index.html;
      }
      
      # Route PHP requests to the PHP-FPM processor
      location ~ \.php$ {
          root /var/www/html/saviskar_api;
          fastcgi_pass unix:/var/run/php-fpm/www.sock;
          fastcgi_index index.php;
          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
          include fastcgi_params;
      }
      
      # Route API requests to your Node.js backend
      location /api/ {
          proxy_pass http://localhost:3001;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection 'upgrade';
          proxy_set_header Host $host;
      }
